(window.webpackJsonp=window.webpackJsonp||[]).push([[296],{1715:function(n,e,t){"use strict";t.r(e);var a=t(42),s=Object(a.a)({},(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"nginx-1-14-2-移植指南-openeuler-20-03-lts-sp1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-1-14-2-移植指南-openeuler-20-03-lts-sp1"}},[n._v("#")]),n._v(" Nginx 1.14.2 移植指南（openEuler 20.03 LTS SP1）")]),n._v(" "),t("h1",{attrs:{id:"介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[n._v("#")]),n._v(" 介绍")]),n._v(" "),t("h2",{attrs:{id:"简要介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简要介绍"}},[n._v("#")]),n._v(" 简要介绍")]),n._v(" "),t("p",[n._v("Nginx是一款轻量级的Web服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，其特点是占有内存少，并发能力强，支持FastCGI、SSL、Virtual Host、URL Rewrite、gzip等功能，并且支持很多第三方的模块扩展。")]),n._v(" "),t("p",[n._v("开发语言：C")]),n._v(" "),t("p",[n._v("一句话描述：Web服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器")]),n._v(" "),t("h2",{attrs:{id:"建议的版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#建议的版本"}},[n._v("#")]),n._v(" 建议的版本")]),n._v(" "),t("p",[n._v("建议使用版本为“Nginx 1.14.2”。\n说明：\n本文档适用于Nginx 1.14.2版本，其他版本的Nginx移植步骤也可参考本文档。")]),n._v(" "),t("h1",{attrs:{id:"环境要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境要求"}},[n._v("#")]),n._v(" 环境要求")]),n._v(" "),t("h2",{attrs:{id:"硬件要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#硬件要求"}},[n._v("#")]),n._v(" 硬件要求")]),n._v(" "),t("p",[n._v("硬件要求如表1所示。\n表1 硬件要求")]),n._v(" "),t("table",[t("thead",[t("tr",[t("th",[n._v("项目")]),n._v(" "),t("th",[n._v("说明")])])]),n._v(" "),t("tbody",[t("tr",[t("td",[n._v("服务器")]),n._v(" "),t("td",[n._v("TaiShan 200服务器（型号2280）")])]),n._v(" "),t("tr",[t("td",[n._v("CPU")]),n._v(" "),t("td",[n._v("鲲鹏920 5250处理器")])]),n._v(" "),t("tr",[t("td",[n._v("磁盘分区")]),n._v(" "),t("td",[n._v("对磁盘分区无要求")])])])]),n._v(" "),t("h2",{attrs:{id:"操作系统要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作系统要求"}},[n._v("#")]),n._v(" 操作系统要求")]),n._v(" "),t("p",[n._v("操作系统要求如表2所示。\n表2 操作系统要求")]),n._v(" "),t("table",[t("thead",[t("tr",[t("th",[n._v("项目")]),n._v(" "),t("th",[n._v("版本")]),n._v(" "),t("th",[n._v("版本查看命令")])])]),n._v(" "),t("tbody",[t("tr",[t("td",[n._v("openEuler")]),n._v(" "),t("td",[n._v("20.03 LTS SP1")]),n._v(" "),t("td",[t("code",[n._v("cat /etc/openEuler-release")])])]),n._v(" "),t("tr",[t("td",[n._v("Kernel")]),n._v(" "),t("td",[n._v("4.19.90")]),n._v(" "),t("td",[t("code",[n._v("uname -r")])])])])]),n._v(" "),t("h1",{attrs:{id:"配置编译环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置编译环境"}},[n._v("#")]),n._v(" 配置编译环境")]),n._v(" "),t("h2",{attrs:{id:"配置yum源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置yum源"}},[n._v("#")]),n._v(" 配置Yum源")]),n._v(" "),t("p",[n._v("说明：\n如果组网环境处于外网受限情况下，服务器yum命令无法通过外界获取依赖包时，可参考本节内容进行本地源配置。")]),n._v(" "),t("ol",[t("li",[n._v("将操作系统镜像文件openEuler-20.03-LTS-everything-aarch64-dvd.iso文件拷贝到每台服务器的“/root”目录下。")]),n._v(" "),t("li",[n._v("镜像文件挂载。\na. 将“/root”目录下的openEuler操作系统对应iso文件挂载到“/mnt”目录下。\n"),t("code",[n._v("mount /root/openEuler-20.03-LTS-SP1-everything-aarch64-dvd.iso /mnt")]),n._v("\n说明：\n该操作单次生效，重启后失效。若需要配置开机启动自动挂载镜像（可选），可参考下面步骤。\n"),t("ol",[t("li",[n._v("打开fstab文件。\n"),t("code",[n._v("vi /etc/fstab")])]),n._v(" "),t("li",[n._v("编辑fstab文件，在文件末尾添加如下信息：\n"),t("code",[n._v("/root/openEuler-20.03-LTS-SP1-everything-aarch64-dvd.iso /mnt iso9660 loop 0 0")])]),n._v(" "),t("li",[n._v("保存并退出fstab文件。")])])]),n._v(" "),t("li",[n._v("添加本地源文件。\na. 进入“/etc/yum.repos.d”目录。\n"),t("code",[n._v("cd /etc/yum.repos.d")]),n._v("\n说明：\n此时，建议将此目录下的*.repo文件移到任意其他备份目录下。\nb. 创建local.repo文件。\n"),t("ol",[t("li",[n._v("打开local.repo文件。\n"),t("code",[n._v("vi local.repo")])]),n._v(" "),t("li",[n._v("编辑local.repo文件，在local.repo文件中添加如下内容：")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("[local]\nname=local.repo\nbaseurl=file:///mnt\nenabled=1\ngpgcheck=0\n")])])]),n._v("说明：\n其中，baseurl中file路径为镜像挂载路径，与镜像文件挂载中的目录“/mnt” 对应。\n3. 保存并退出local.repo文件。\n4. 生效本地源。"),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("yum clean all\nyum makecache\nyum list\n")])])])])]),n._v(" "),t("h2",{attrs:{id:"安装依赖包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖包"}},[n._v("#")]),n._v(" 安装依赖包")]),n._v(" "),t("p",[n._v("下载并安装依赖包")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("yum -y install gcc gcc-c++ make libtool zlib zlib-devel pcre pcre-devel pcre2-devel perl-devel perl-ExtUtils-Embed openssl openssl-devel\n")])])]),t("h1",{attrs:{id:"获取源码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取源码"}},[n._v("#")]),n._v(" 获取源码")]),n._v(" "),t("p",[n._v("本文使用源码编译安装，因此需要获取到Nginx。")]),n._v(" "),t("ol",[t("li",[n._v("下载Nginx源码\n"),t("code",[n._v("cd /home")]),n._v(" "),t("code",[n._v("wget https://nginx.org/download/nginx-1.14.2.tar.gz --no-check-certificate")])])]),n._v(" "),t("p",[n._v('说明：\n也可以通过本地浏览器下载源码之后上传到服务器"/home"目录下。\n源码地址：https://nginx.org/download/nginx-1.14.2.tar.gz')]),n._v(" "),t("p",[n._v("注意：\n若及其需要配置代理才可以访问外网，请参考下面操作配置网络代理。")]),n._v(" "),t("ol",[t("li",[n._v("打开profile文件\n"),t("code",[n._v("vi /etc/profile")])]),n._v(" "),t("li",[n._v("添加如下代码后，保存并退出文件。\n其中，代理服务用户名、代理服务器密码、代理服务器IP和代理服务端口需要根据当前环境配置")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('export http_proxy="http://代理服务器名:代理服务器密码@代理服务器IP：代理服务器端口"\nexport http_proxy=$http_proxy\nexport no_proxy=127.0.0.1,.huawei.com,localhost,local,.local\n')])])]),t("ol",{attrs:{start:"3"}},[t("li",[n._v("使用代理效。\n"),t("code",[n._v("source /etc/profile")])]),n._v(" "),t("li",[n._v("查看环境变量中的代理信息。\n"),t("code",[n._v("env")])]),n._v(" "),t("li",[n._v("验证代理是否配置成功。\n"),t("code",[n._v("curl www.baidu.com")]),n._v("\n可以正常解析百度即为配置成功。")])]),n._v(" "),t("h1",{attrs:{id:"编译和安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译和安装"}},[n._v("#")]),n._v(" 编译和安装")]),n._v(" "),t("ol",[t("li",[t("p",[n._v("解压Nginx安装包。\n"),t("code",[n._v("tar -xvf nginx-1.14.2.tar.gz")])])]),n._v(" "),t("li",[t("p",[n._v('进入"nginx-1.14.2"目录。\n'),t("code",[n._v("cd /home/nginx-1.14.2/")])])]),n._v(" "),t("li",[t("p",[n._v("配置Nginx。\n"),t("code",[n._v("./configure --prefix=/usr/local/nginx --with-http_ssl_module")]),n._v("\n说明：")])])]),n._v(" "),t("ul",[t("li",[n._v('--prefix=PATH:用来制定Nginx的安装目录，默认安装目录为"/usr/local/nginx"。')]),n._v(" "),t("li",[n._v("不需要配置with-http_stub_status_module模块，该统计模块会影响Nginx性能。")])]),n._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[n._v("编译并安装Nginx\n"),t("code",[n._v("make -j96 &amp;&amp; make -j96 install")]),n._v("\n说明：\n-j96: 充分利用CPU多核优势，加快编译安装速度。\nCPU 的核数可以通过lscpu查看。\n5.查看安装目录。\n"),t("code",[n._v("ls /usr/local/nginx")])])]),n._v(" "),t("h1",{attrs:{id:"运行和验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行和验证"}},[n._v("#")]),n._v(" 运行和验证")]),n._v(" "),t("h2",{attrs:{id:"生成证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成证书"}},[n._v("#")]),n._v(" 生成证书")]),n._v(" "),t("ol",[t("li",[n._v('进入"/usr/local/nginx"目录，在该目录下生成密钥key。\n'),t("code",[n._v("cd /usr/local/nginx")]),n._v(" "),t("code",[n._v("openssl genrsa -des3 -out server_2048.key 2048")]),n._v("\n会有两次要求输入密码，输入同一个即可，此时会生成server_2048.key文件。")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("[root@localhost nginx]# openssl genrsa -des3 -out server_2048.key 2048\nGenerating RSA private key, 2048 bit long modulus (2 primes)\n..................................................................................+++++\n................+++++\ne is 65537 (0x010001)\nEnter pass phrase for server_2048.key:\nVerifying - Enter pass phrase for server_2048.key:\n")])])]),t("p",[n._v("说明：\n可通过如下命令实现免密码使用此文件：\n"),t("code",[n._v("openssl rsa -in server_2048.key -out -server_2048.key")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("[root@localhost nginx]# openssl rsa -in server_2048.key -out -server_2048.key\nEnter pass phrase for server_2048.key\nwriting RSA key\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[n._v("创建服务器证书的申请文件。")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("openssl req -new -key server_2048.key -out server_2048.csr\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("[root@localhost nginx]# openssl req -new -key server_2048.key -out server_2048.csr\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\nCountry Name (2 letter code) [AU]:CN\nState or Province Name (full name) [Some-State]:\nLocality Name (eg, city) []:\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]:\nOrganizational Unit Name (eg, section) []:\nCommon Name (e.g. server FQDN or YOUR name) []:\nEmail Address []:\n\nPlease enter the following 'extra' attributes\nto be sent with your certificate request\nA challenge password []:\nAn optional company name []:\n")])])]),t("p",[n._v("输入1中设置的密码，其中Country Name 选项输入CN，其他选项可以不填。\n3. 重写密钥key。\n"),t("code",[n._v("openssl rsa -in server_2048.key -out server_2048.key")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("[root@localhost nginx]# openssl rsa -in server_2048.key -out server_2048.key\nwriting RSA key\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[n._v("生成证书。\n"),t("code",[n._v("openssl x509 -req -days 365 -in server_2048.csr -signkey server_2048.key -out server_2048.crt")])])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("[root@localhost nginx]# openssl x509 -req -days 365 -in server_2048.csr -signkey server_2048.key -out server_2048.crt\nSignature ok\nsubject=C = CN, ST = Some-State, O = Internet Widgits Pty Ltd\nGetting Private key\n")])])]),t("p",[n._v("输入1中设置的密码。若已经设置免密码使用该文件，则无需输入密码。")]),n._v(" "),t("h2",{attrs:{id:"配置功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置功能"}},[n._v("#")]),n._v(" 配置功能")]),n._v(" "),t("h3",{attrs:{id:"配置nginx的https功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置nginx的https功能"}},[n._v("#")]),n._v(" 配置Nginx的HTTPS功能")]),n._v(" "),t("ol",[t("li",[n._v("打开nginx.conf配置文件。\n"),t("code",[n._v("vi /usr/local/nginx/conf/nginx.conf")])]),n._v(" "),t("li",[n._v("修改nginx.conf配置文件以下三处配置后，保存并退出（Esc+ :wq）。\n"),t("ul",[t("li",[n._v("定义Nginx运行的用户权限user为root。")]),n._v(" "),t("li",[n._v("修改listen监测端口，可以使用默认端口，本文修改为20000。")]),n._v(" "),t("li",[n._v("指定ssl_certificate和ssl_certificate_key文件。")])])])]),n._v(" "),t("h4",{attrs:{id:"原文默认内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原文默认内容"}},[n._v("#")]),n._v(" 原文默认内容：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("#user  nobody;\n...\n    # HTTPS server\n    #\n    #server {\n    #    listen       443 ssl;\n    #    server_name  localhost;\n\n    #    ssl_certificate      cert.pem;\n    #    ssl_certificate_key  cert.key;\n\n    #    ssl_session_cache    shared:SSL:1m;\n    #    ssl_session_timeout  5m;\n\n    #    ssl_ciphers  HIGH:!aNULL:!MD5;\n    #    ssl_prefer_server_ciphers  on;\n\n    #    location / {\n    #        root   html;\n    #        index  index.html index.htm;\n    #    }\n    #}\n")])])]),t("h4",{attrs:{id:"修改后内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改后内容"}},[n._v("#")]),n._v(" 修改后内容：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("user  root;\n ...\n     HTTPS server\n    \n    server {\n        listen       20000 ssl;\n        server_name  localhost;\n\n        ssl_certificate      /usr/local/nginx/server_2048.crt;\n        ssl_certificate_key  /usr/local/nginx/server_2048.key;\n\n        ssl_session_cache    shared:SSL:1m;\n        ssl_session_timeout  5m;\n\n        ssl_ciphers  HIGH:!aNULL:!MD5;\n        ssl_prefer_server_ciphers  on;\n\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n    }\n\n")])])]),t("h3",{attrs:{id:"配置nginx的http功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置nginx的http功能"}},[n._v("#")]),n._v(" 配置Nginx的HTTP功能")]),n._v(" "),t("ol",[t("li",[n._v("打开nginx.conf配置文件。\n"),t("code",[n._v("vi /usr/local/nginx/conf/nginx.conf")])]),n._v(" "),t("li",[n._v("修改nginx.conf配置文件以下三处配置后，保存并退出（Esc+ :wq）。\n"),t("ul",[t("li",[n._v("定义Nginx运行的用户权限user为root。")]),n._v(" "),t("li",[n._v("修改listen监测端口，可以使用默认端口，本文修改为10000。")])])])]),n._v(" "),t("h4",{attrs:{id:"原文件默认内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原文件默认内容"}},[n._v("#")]),n._v(" 原文件默认内容：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('user  root;\n...\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n    #                  \'$status $body_bytes_sent "$http_referer" \'\n    #                  \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on\n\n    server {\n        listen       80;\n        server_name  localhost;\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n   }\n}\n')])])]),t("h4",{attrs:{id:"修改后内容-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改后内容-2"}},[n._v("#")]),n._v(" 修改后内容：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('user  root;\n...\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n    #                  \'$status $body_bytes_sent "$http_referer" \'\n    #                  \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on\n\n    server {\n        listen       10000;\n        server_name  localhost;\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n   }\n}\n')])])]),t("h2",{attrs:{id:"运行nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行nginx"}},[n._v("#")]),n._v(" 运行Nginx")]),n._v(" "),t("ol",[t("li",[t("p",[n._v("启动Nginx（两种方式）。")]),n._v(" "),t("ul",[t("li",[n._v("通过Service服务启动（使用该方法需要先将Nginx加入Service服务再执行启动命令）。\n"),t("ol",[t("li",[n._v("修改“/etc/init.d/nginx”文件。\na. 删除原文件nginx。\n"),t("code",[n._v("rm -rf /etc/init.d/nginx")]),n._v("\nb. 新建nginx文件。\n"),t("code",[n._v("vi /etc/init.d/nginx")]),n._v("\nc. 添加如下内容后，保存并退")])])])])])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('\t   #!/bin/bash\n\t   # chkconfig: 2345 10 90\n\t   # description: nginx\n\t   case "$1" in\n\t     \'start\')\n\t       /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf\n\t       echo "$0_start";\n\t      ;;\n\t    \'stop\')\n\t     /usr/local/nginx/sbin/nginx -s quit\n\t     echo "$0_stop";\n\t     ;;\n\t   esac\n')])])]),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[n._v(" 2. 修改“/etc/init.d/nginx”文件权限。\n")])])]),t("p",[t("code",[n._v("chmod 777 /etc/init.d/nginx")]),n._v("\n3. 将Nginx加入chkconfig管理列表。\n"),t("code",[n._v("chkconfig --add /etc/init.d/nginx")]),n._v("\n4. 设置Nginx开机自动启动。\n"),t("code",[n._v("chkconfig nginx on")]),n._v("\n5. 启动Nginx。\n"),t("code",[n._v("service nginx start")]),n._v("\n- 通过脚本命令启动。\n"),t("code",[n._v("/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf")]),n._v("\n2. 查看Nginx的进程。\n"),t("code",[n._v("ps -ef | grep nginx")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("[root@localhost nginx]# ps -ef | grep nginx\nroot        9463       1  0 18:22 ?        00:00:00 nginx: master process /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf\nroot        9464    9463  0 18:22 ?        00:00:00 nginx: worker process\nroot        9466    1352  0 18:23 ttyAMA0  00:00:00 grep --color=auto nginx\n")])])]),t("p",[n._v("说明：\n关闭Nginx命令如下（3种方式，可选）。业务运行中不要执行该命令。")]),n._v(" "),t("ul",[t("li",[n._v("通过Service服务关闭。\n"),t("code",[n._v("service nginx stop")])]),n._v(" "),t("li",[n._v("通过脚本命令关闭。\n"),t("code",[n._v("/usr/local/nginx/sbin/nginx -s quit")])]),n._v(" "),t("li",[n._v("使用结束进程命令。")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[n._v("```pkill nginx```\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("[root@localhost nginx]# pkill nginx\n[root@localhost nginx]# ps -ef | grep nginx\nroot        9469    1352  0 18:27 ttyAMA0  00:00:00 grep --color=auto nginx\n")])])]),t("h2",{attrs:{id:"验证nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#验证nginx"}},[n._v("#")]),n._v(" 验证Nginx")]),n._v(" "),t("ol",[t("li",[n._v("查看Nginx的监测端口（10000是HTTP监测端口，20000是HTTPS监测端口）。\n"),t("code",[n._v("netstat -anp | grep 10000")]),n._v(" "),t("code",[n._v("netstat -anp | grep 20000")]),n._v(" "),t("code",[n._v("netstat -anpt")])])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("[root@localhost nginx]# netstat -anp | grep 10000\ntcp        0      0 0.0.0.0:10000           0.0.0.0:*               LISTEN      9535/nginx: master  \n[root@localhost nginx]# netstat -anp | grep 20000\ntcp        0      0 0.0.0.0:20000           0.0.0.0:*               LISTEN      9535/nginx: master  \n[root@localhost nginx]# netstat -anpt\nActive Internet connections (servers and established)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    \ntcp        0      0 0.0.0.0:10000           0.0.0.0:*               LISTEN      9535/nginx: master  \ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      775/sshd: /usr/sbin \n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[n._v("查看Nginx的HTML文件所在目录。\n"),t("code",[n._v("ll -h /usr/local/nginx/html/")])])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("[root@localhost nginx]# ll -h /usr/local/nginx/html/\ntotal 8.0K\n-rw-r--r--. 1 root root 537 Mar 20 16:46 50x.html\n-rw-r--r--. 1 root root 612 Mar 20 16:46 index.html\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[n._v("验证HTTPS功能。\n通过curl本地访问Nginx的HTML页面。\n"),t("code",[n._v("curl -k https://127.0.0.1:20000/index.html")])])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('[root@localhost nginx]# curl -k  https://127.0.0.1:20000/index.html\n\n\n\nWelcome to nginx!\n\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n\n\n\n<h1>Welcome to nginx!</h1>\nIf you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.\n\nFor online ation and support please refer to\n<a href="#" class="white">nginx.org</a>.<br>\nCommercial support is available at\n<a href="#" class="white">nginx.com</a>.\n\n<em>Thank you for using nginx.</em>\n\n\n')])])]),t("ol",{attrs:{start:"4"}},[t("li",[n._v("验证HTTP功能。\n通过curl本地访问Nginx的HTML页面。\n"),t("code",[n._v("curl http://127.0.0.1:10000/index.html")])])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('[root@localhost nginx]# curl http://127.0.0.1:10000/index.html\n\n\n\nWelcome to nginx!\n\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n\n\n\n<h1>Welcome to nginx!</h1>\nIf you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.\n\nFor online ation and support please refer to\n<a href="#" class="white">nginx.org</a>.<br>\nCommercial support is available at\n<a href="#" class="white">nginx.com</a>.\n\n<em>Thank you for using nginx.</em>\n\n\n')])])]),t("h1",{attrs:{id:"卸载nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#卸载nginx"}},[n._v("#")]),n._v(" 卸载Nginx")]),n._v(" "),t("ol",[t("li",[n._v("编译安装只是生成对应的文件，不涉及卸载，直接删除对应的安装目录即可。\n"),t("code",[n._v("rm -rf /usr/local/nginx")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);