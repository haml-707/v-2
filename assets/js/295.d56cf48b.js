(window.webpackJsonp=window.webpackJsonp||[]).push([[295],{1712:function(t,a,s){"use strict";s.r(a);var e=s(42),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"lighttpd-1-4-53-移植指南-openeuler-20-03-lts-sp1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lighttpd-1-4-53-移植指南-openeuler-20-03-lts-sp1"}},[t._v("#")]),t._v(" Lighttpd 1.4.53 移植指南（openEuler 20.03 LTS SP1）")]),t._v(" "),s("h1",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),s("h2",{attrs:{id:"简要介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简要介绍"}},[t._v("#")]),t._v(" 简要介绍")]),t._v(" "),s("p",[t._v("Lighttpd 是开源Web服务器软件，其根本的目的是提供一个专门针对高性能网站，安全、快速、兼容性好并且灵活的Web Server环境。具有非常低的内存开销、CPU占用率低、效能好以及丰富的模块等特点。")]),t._v(" "),s("p",[t._v("Lighttpd是众多OpenSource轻量级的Web Server中较为优秀的一个。支持FastCGI，CGI，Auth，输出压缩(output compress)，URL重写，Alias等重要功能；而Apache之所以流行，很大程度也是因为功能丰富，在Lighttpd上很多功能都有相应的实现了，这点对于Apache的用户是非常重要的，因为迁移到Lighttpd就必须面对这些问题。")]),t._v(" "),s("p",[t._v("开发语言：C")]),t._v(" "),s("p",[t._v("一句话描述：Web 服务器")]),t._v(" "),s("h2",{attrs:{id:"建议的版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#建议的版本"}},[t._v("#")]),t._v(" 建议的版本")]),t._v(" "),s("p",[t._v("建议使用版本为“Lighttpd 1.4.53”。")]),t._v(" "),s("h1",{attrs:{id:"环境要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境要求"}},[t._v("#")]),t._v(" 环境要求")]),t._v(" "),s("h2",{attrs:{id:"硬件要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#硬件要求"}},[t._v("#")]),t._v(" 硬件要求")]),t._v(" "),s("p",[t._v("###硬件要求如下所示。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("项目")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("服务器")]),t._v(" "),s("td",[t._v("TaiShan 200服务器（型号2280）")])]),t._v(" "),s("tr",[s("td",[t._v("CPU")]),t._v(" "),s("td",[t._v("鲲鹏920 5250处理器")])]),t._v(" "),s("tr",[s("td",[t._v("磁盘分区")]),t._v(" "),s("td",[t._v("对磁盘分区无要求")])])])]),t._v(" "),s("h2",{attrs:{id:"操作系统要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作系统要求"}},[t._v("#")]),t._v(" 操作系统要求")]),t._v(" "),s("p",[t._v("操作系统要求如下所示。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("项目")]),t._v(" "),s("th",[t._v("版本")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("openEuler")]),t._v(" "),s("td",[t._v("20.03 sp1 aarch64")])]),t._v(" "),s("tr",[s("td",[t._v("Kernel")]),t._v(" "),s("td",[t._v("4.19")])])])]),t._v(" "),s("p",[t._v("说明：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("如果是全新安装操作系统，安装方式建议不要使用最小化安装，否则很多软件包需要手动安装，可选择“Server with GUI”安装方式。\n")])])]),s("h1",{attrs:{id:"配置编译环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置编译环境"}},[t._v("#")]),t._v(" 配置编译环境")]),t._v(" "),s("ol",[s("li",[t._v("安装依赖库")])]),t._v(" "),s("p",[t._v("yum -y install gcc gcc-c++ glib2-devel pcre-devel bzip2-devel zlib-devel gamin-devel")]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("获取源码")])]),t._v(" "),s("p",[t._v("下载地址：https://download.lighttpd.net/lighttpd/releases-1.4.x/lighttpd-1.4.53.tar.gz")]),t._v(" "),s("h2",{attrs:{id:"配置安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置安装"}},[t._v("#")]),t._v(" 配置安装")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cp lighttpd-1.4.53.tar.gz $HOME &amp;&amp; cd $HOME\ntar xzvf lighttpd-1.4.53.tar.gz\n")])])]),s("h2",{attrs:{id:"编译安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译安装"}},[t._v("#")]),t._v(" 编译安装")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd lighttpd-1.4.53\n./configure  --prefix=/usr/local/lighttpd  --with-fam\nmake -j60 &amp;&amp; make install\n")])])]),s("p",[t._v("说明：")]),t._v(" "),s("p",[t._v("--prefix=PATH：指定Lighttpd的安装目录。\n--with-fam：fam 用于减少stat()函数调用次数。")]),t._v(" "),s("h1",{attrs:{id:"参数配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数配置"}},[t._v("#")]),t._v(" 参数配置")]),t._v(" "),s("h2",{attrs:{id:"创建软件目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建软件目录"}},[t._v("#")]),t._v(" 创建软件目录")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd /usr/local/lighttpd/\nmkdir log webpages cache config\n")])])]),s("h2",{attrs:{id:"拷贝配置文件-目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拷贝配置文件-目录"}},[t._v("#")]),t._v(" 拷贝配置文件/目录")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cp $HOME/lighttpd-1.4.53/doc/config/lighttpd.conf  /usr/local/lighttpd/config/\ncp $HOME/lighttpd-1.4.53/doc/config/modules.conf   /usr/local/lighttpd/config/\ncp $HOME/lighttpd-1.4.53/doc/config/conf.d         /usr/local/lighttpd/config/ -r\n")])])]),s("p",[t._v("说明：")]),t._v(" "),s("p",[t._v("Lighttpd安装后的安装路径下只有三个文件夹 lib，sbin和share，其他文件需要自己拷贝和创建。")]),t._v(" "),s("h2",{attrs:{id:"修改lighttpd-conf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改lighttpd-conf"}},[t._v("#")]),t._v(" 修改lighttpd.conf")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vi /usr/local/lighttpd/config/lighttpd.conf\n\n")])])]),s("p",[t._v("修改第16-20行为：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("var.log_root       =   &quot;/usr/local/lighttpd/log&quot;\nvar.server_root    =   &quot;/usr/local/lighttpd&quot;\nvar.state_dir      =   &quot;/usr/local/lighttpd&quot;\nvar.home_dir       =   &quot;/usr/local/lighttpd&quot;\nvar.conf_dir       =   &quot;/usr/local/lighttpd/config&quot;\n")])])]),s("p",[t._v("修改第61行为：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("var.cache_dir      =   &quot;/usr/local/lighttpd/cache&quot;\n")])])]),s("p",[t._v("第93行加注释：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("#server.use-ipv6 = &quot;enable&quot;\n")])])]),s("p",[t._v("修改第104-105行（该项为操作权限，不建议使用root）为：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server.username  =  &quot;lighttpd1&quot;\nserver.groupname  =  &quot;lighttpd&quot;\n")])])]),s("p",[t._v("修改第115行（访问页面存放路径）为：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server.document-root  =  server_root + &quot;webpages&quot;\n")])])]),s("p",[t._v("修改第246行（缓存模式，默认为simple，官方解释fam要优于simple）为：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server.stat-cache-engine = &quot;fam&quot;\n")])])]),s("p",[t._v("在第182行添加如下内容（该项为配置多进程模式，Lighttpd默认单进程,数值可根据实际需求修改） ：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server.max-worker = 4\n")])])]),s("h2",{attrs:{id:"创建用户组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建用户组"}},[t._v("#")]),t._v(" 创建用户组")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("groupadd  lighttpd\nuseradd -g lighttpd  lighttpd1\n")])])]),s("h2",{attrs:{id:"修改权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改权限"}},[t._v("#")]),t._v(" 修改权限")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("chown lighttpd1  /usr/local/lighttpd/log\n")])])]),s("h2",{attrs:{id:"添加测试页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加测试页面"}},[t._v("#")]),t._v(" 添加测试页面")]),t._v(" "),s("p",[t._v("cd /usr/local/lighttpd/webpages\nvi index.html")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("\t&lt;html&gt;\n\t&lt;head&gt;\n\t&lt;title&gt;lighttpd test&lt;/title&gt;\n\t&lt;/head&gt;\n\t&lt;body&gt;\n\t&lt;p&gt;this is a testing&lt;/p&gt;\n\t&lt;/body&gt;\n\t&lt;/html&gt;\n")])])]),s("h1",{attrs:{id:"服务测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务测试"}},[t._v("#")]),t._v(" 服务测试")]),t._v(" "),s("p",[t._v("启动lighttpd:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("/usr/local/lighttpd/sbin/lighttpd -f /usr/local/lighttpd/config/lighttpd.conf\n")])])]),s("p",[t._v("查看程序进程:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ps -ef |grep lighttpd\n")])])]),s("p",[t._v("停止apache:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pkill lighttpd\n")])])]),s("p",[t._v("测试网页：")]),t._v(" "),s("p",[t._v("http://"+t._s(t.server_ip)+":80/index.html")])])}),[],!1,null,null,null);a.default=r.exports}}]);