(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{1190:function(t,s,a){t.exports=a.p+"assets/img/tengine-1.f345c6fe.png"},1717:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"tengine-2-2-2-移植指南"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tengine-2-2-2-移植指南"}},[t._v("#")]),t._v(" Tengine 2.2.2 移植指南")]),t._v(" "),n("h1",{attrs:{id:"介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),n("h4",{attrs:{id:"简要介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简要介绍"}},[t._v("#")]),t._v(" 简要介绍")]),t._v(" "),n("p",[t._v("Tengine是由淘宝网发起的Web服务器项目。它在Nginx的基础上，针对大访问量网站的需求，添加了很多高级功能和特性。它的目的是打造一个高效、安全的Web平台。")]),t._v(" "),n("p",[t._v("开发语言：C")]),t._v(" "),n("p",[t._v("一句话描述：轻量级Web服务器")]),t._v(" "),n("h4",{attrs:{id:"建议的版本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建议的版本"}},[t._v("#")]),t._v(" 建议的版本")]),t._v(" "),n("p",[t._v("建议使用版本为“Tengine 2.2.2”。")]),t._v(" "),n("blockquote",[n("p",[t._v("说明：\n本文档适用于Tengine 2.2.2，其他版本的Tengine移植步骤也可参考本文档。")])]),t._v(" "),n("h1",{attrs:{id:"环境要求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#环境要求"}},[t._v("#")]),t._v(" 环境要求")]),t._v(" "),n("h4",{attrs:{id:"硬件要求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#硬件要求"}},[t._v("#")]),t._v(" 硬件要求")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("项目")]),t._v(" "),n("th",[t._v("说明")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("服务器")]),t._v(" "),n("td",[t._v("TaiShan 200服务器（型号2280）")])]),t._v(" "),n("tr",[n("td",[t._v("CPU")]),t._v(" "),n("td",[t._v("鲲鹏920 5250处理器")])]),t._v(" "),n("tr",[n("td",[t._v("磁盘分区")]),t._v(" "),n("td",[t._v("对磁盘分区无要求")])])])]),t._v(" "),n("h4",{attrs:{id:"操作系统要求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#操作系统要求"}},[t._v("#")]),t._v(" 操作系统要求")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("项目")]),t._v(" "),n("th",[t._v("版本")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("openEuler")]),t._v(" "),n("td",[t._v("openEuler 20.03 LTS SP1 aarch64")])]),t._v(" "),n("tr",[n("td",[t._v("Kernel")]),t._v(" "),n("td",[t._v("4.19.90-2003.4.0.0036.oe1.aarch64")])])])]),t._v(" "),n("h4",{attrs:{id:"安装操作系统"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装操作系统"}},[t._v("#")]),t._v(" 安装操作系统")]),t._v(" "),n("p",[t._v("请参考："),n("a",{attrs:{href:"https://openeuler.org/zh/docs/20.03_LTS_SP1/docs/Installation/installation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("20.03 LTS SP1 安装指南"),n("OutboundLink")],1)]),t._v(" "),n("h4",{attrs:{id:"检查当前系统版本信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#检查当前系统版本信息"}},[t._v("#")]),t._v(" 检查当前系统版本信息")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat /etc/os-release")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NAME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"openEuler"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VERSION")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20.03 (LTS-SP1)"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ID")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"openEuler"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VERSION_ID")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20.03"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PRETTY_NAME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"openEuler 20.03 (LTS-SP1)"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ANSI_COLOR")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0;31"')]),t._v("\n")])])]),n("blockquote",[n("p",[t._v("说明：\n如果是全新安装操作系统，安装方式建议不要使用最小化安装，否则很多软件包需要手动安装，可选择“Server with GUI”安装方式。")])]),t._v(" "),n("h1",{attrs:{id:"安装tengine"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装tengine"}},[t._v("#")]),t._v(" 安装Tengine")]),t._v(" "),n("h2",{attrs:{id:"配置dns解析文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置dns解析文件"}},[t._v("#")]),t._v(" 配置dns解析文件")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# echo "nameserver 114.114.114.114" >> /etc/resolv.conf')]),t._v("\n")])])]),n("h2",{attrs:{id:"安装依赖包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖包"}},[t._v("#")]),t._v(" 安装依赖包")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yum install gcc gcc-c++ make libtool zlib zlib-devel pcre pcre-devel perl-devel perl-ExtUtils-Embed wget vim -y")]),t._v("\n")])])]),n("h2",{attrs:{id:"镜像站rpm方式安装tengine"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#镜像站rpm方式安装tengine"}},[t._v("#")]),t._v(" 镜像站RPM方式安装tengine")]),t._v(" "),n("blockquote",[n("p",[t._v("说明：\n镜像站中的RPM包都是通过开源代码编译打包而成，然后将其上传到镜像站。")])]),t._v(" "),n("h3",{attrs:{id:"获取tengine-2-2-2的rpm包。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#获取tengine-2-2-2的rpm包。"}},[t._v("#")]),t._v(" 获取Tengine 2.2.2的RPM包。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /home")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost home"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wget https://mirrors.huaweicloud.com/kunpeng/yum/el/7/aarch64/Packages/web/tengine-2.2.2-1.el7_4.ngx.aarch64.rpm")]),t._v("\n")])])]),n("h3",{attrs:{id:"兼容性评估"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#兼容性评估"}},[t._v("#")]),t._v(" 兼容性评估")]),t._v(" "),n("h4",{attrs:{id:"下载工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载工具"}},[t._v("#")]),t._v(" 下载工具")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("wget https://repo.oepkgs.net/openEuler/rpm/openEuler-20.03-LTS-SP1/extras-tgz/noarch/x2openEuler-1.0-1.noarch.rpm\n\n用户指南：\nhttps://gitee.com/openeuler/docs/blob/stable2-20.03_LTS_SP1/docs/zh/docs/thirdparty_migration/x2openEuleruseguide.md\n")])])]),n("h4",{attrs:{id:"部署工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署工具"}},[t._v("#")]),t._v(" 部署工具")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("rpm -ivh x2openEuler-1.0-1.noarch.rpm\n")])])]),n("blockquote",[n("p",[t._v("注意：安装rpm时需要使用root用户，且目前需要网络（用于下载安装依赖）\n注意：根据提示安装依赖包如bzip2-devel等")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("su x2openEuler\nx2openEuler redis-db -init\n")])])]),n("blockquote",[n("p",[t._v("依次录入redis数据库的ip:127.0.0.1\n端口：6379\n数据库索引号（0-16）：0\n密码（工具会对密码加密处理）：如果redis密码没有设置或者为空时，直接回车即可")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("x2openEuler init source_centos7.6-openEuler20.03-LTS-SP1.tar.gz\n")])])]),n("blockquote",[n("p",[t._v("备注：x2openEuler使用rpm安装完成后会在/opt/x2openEuler目录下带有source_centos7.6-openEuler20.03-LTS-SP1.tar.gz这个默认资源包\n需要支持centos8.2到openEuler20.03-LTS-SP1的评估，则需获取对应的静态资源包导入，如对应的资源包为source_centos8.2-openEuler20.03-LTS-SP1.tar.gz，导入此包命令："),n("code",[t._v("x2openEuler init source_centos8.2-openEuler20.03-LTS-SP1.tar.gz")]),t._v("，请示情况选择对应的资源包")])]),t._v(" "),n("h4",{attrs:{id:"扫描软件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#扫描软件"}},[t._v("#")]),t._v(" 扫描软件")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("x2openEuler scan tengine-2.2.2-1.el7_4.ngx.aarch64.rpm\n注意要分析的移植文件需要有能够让x2openEuler用户可以读取的权限\n扫描完成后会在/opt/x2openEuler/output目录生成html格式的报告\n")])])]),n("h2",{attrs:{id:"查看评估结果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看评估结果"}},[t._v("#")]),t._v(" 查看评估结果")]),t._v(" "),n("p",[t._v("软件兼容性评估报告分三块内容展示软件兼容性，分别是依赖包兼容性、C/C++接口兼容性、java接口兼容性，依赖包兼容性反映了软件包安装过程中的直接依赖，非100%表明无法正确安装；接口兼容性反映的是单个软件运行过程中对其他软件包、动态库或系统接口的调用变化，非100%表明在某个功能调用时可能会触发异常，未调用到时可能表现正常；部分结果建议人工复核，最终软件包使用建优先级建议 openEuler已移植包>openEuler上人工重编译包>centos软件包。")]),t._v(" "),n("img",{attrs:{src:a(1190)}}),t._v(" "),n("p",[t._v("结果：通过报告可知外部接口兼容性100%，依赖包兼容性人工复核后通过，经评估tengine2.2.2软件包在openEuler 20.03 LTS SP1系统上兼容，可安装此软件包至openEuler 20.03 LTS SP1系统进行验证。")]),t._v(" "),n("h3",{attrs:{id:"安装tengine-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装tengine-2"}},[t._v("#")]),t._v(" 安装Tengine")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost home"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rpm -ivh tengine-2.2.2-1.el7_4.ngx.aarch64.rpm")]),t._v("\nVerifying"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".                          "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("################################# [100%]")]),t._v("\nPreparing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".                          "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("################################# [100%]")]),t._v("\nUpdating / installing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(":tengine-1:2.2.2-1.el7_4.ngx      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("################################# [100%]")]),t._v("\n")])])]),n("h3",{attrs:{id:"查看安装目录。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看安装目录。"}},[t._v("#")]),t._v(" 查看安装目录。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost home"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /usr/local/tengine-nginx/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls")]),t._v("\nconf  html  include  logs  modules  sbin\n")])])]),n("h1",{attrs:{id:"运行和验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行和验证"}},[t._v("#")]),t._v(" 运行和验证")]),t._v(" "),n("h2",{attrs:{id:"配置https功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置https功能"}},[t._v("#")]),t._v(" 配置HTTPS功能")]),t._v(" "),n("h3",{attrs:{id:"生成证书"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生成证书"}},[t._v("#")]),t._v(" 生成证书")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# openssl genrsa -des3 -out server_2048.key 2048")]),t._v("\nGenerating RSA private key, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),t._v(" bit long modulus "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" primes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".+++++\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("+++++\ne is "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("65537")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0x010001"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nEnter pass phrase "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" server_2048.key:\nVerifying - Enter pass phrase "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" server_2048.key:\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# openssl rsa -in server_2048.key -out server_2048.key")]),t._v("\nEnter pass phrase "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" server_2048.key:\nwriting RSA key\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# openssl req -new -key server_2048.key -out server_2048.csr")]),t._v("\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),t._v(", the field will be left blank.\n-----\nCountry Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" letter code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("AU"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":CN\nState or Province Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("full name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Some-State"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":\nLocality Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eg, city"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":\nOrganization Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eg, company"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Internet Widgits Pty Ltd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":\nOrganizational Unit Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eg, section"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":\nCommon Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e.g. server FQDN or YOUR name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":\nEmail Address "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":\n\nPlease enter the following "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'extra'")]),t._v(" attributes\nto be sent with your certificate request\nA challenge password "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":\nAn optional company name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# openssl rsa -in server_2048.key -out server_2048.key")]),t._v("\nwriting RSA key\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# openssl x509 -req -days 365 -in server_2048.csr -signkey server_2048.key -out server_2048.crt")]),t._v("\nSignature ok\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("subject")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("C "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CN, ST "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Some-State, O "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Internet Widgits Pty Ltd\nGetting Private key\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls")]),t._v("\nconf  html  include  logs  modules  sbin  server_2048.crt  server_2048.csr  server_2048.key\n")])])]),n("h2",{attrs:{id:"配置tengine"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置tengine"}},[t._v("#")]),t._v(" 配置Tengine")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /usr/local/tengine-nginx/conf/nginx.conf\n")])])]),n("p",[t._v("修改如下内容")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("    # HTTPS server\n    #\n    #server {\n    #    listen       443 ssl;\n    #    server_name  localhost;\n\n    #    <== 修改这里： 证书位置 ==>\n    #    ssl_certificate      /usr/local/tengine-nginx/server_2048.crt;\n    #    ssl_certificate_key  /usr/local/tengine-nginx/server_2048.key;\n\n    #    ssl_session_cache    shared:SSL:1m;\n    #    ssl_session_timeout  5m;\n")])])]),n("h2",{attrs:{id:"运行tengine"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行tengine"}},[t._v("#")]),t._v(" 运行Tengine")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /usr/local/tengine-nginx/sbin/nginx -c /usr/local/tengine-nginx/conf/nginx.conf")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ps -ef | grep nginx")]),t._v("\nroot        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5710")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":25 ?        00:00:00 nginx: master process /usr/local/tengine-nginx/sbin/nginx -c /usr/local/tengine-nginx/conf/nginx.conf\nnobody      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5711")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5710")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":25 ?        00:00:00 nginx: worker process\nroot        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5713")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1407")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":25 pts/0    00:00:00 "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" --color"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("auto nginx\n")])])]),n("p",[t._v("提示：")]),t._v(" "),n("ul",[n("li",[t._v("报"),n("code",[t._v("http upstream check_shm_size is too small")]),t._v("错误")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /usr/local/tengine-nginx/sbin/nginx -c /usr/local/tengine-nginx/conf/nginx.conf")]),t._v("\nnginx: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("crit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ngx_slab_alloc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" failed: no memory\nnginx: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emerg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" http upstream check_shm_size is too small, you should specify a larger size.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# sed -i "/http {/a\\check_shm_size 50m;" /usr/local/tengine-nginx/conf/nginx.conf')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /usr/local/tengine-nginx/sbin/nginx -c /usr/local/tengine-nginx/conf/nginx.conf")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost tengine-nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ps -ef | grep nginx")]),t._v("\nroot        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5710")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":25 ?        00:00:00 nginx: master process /usr/local/tengine-nginx/sbin/nginx -c /usr/local/tengine-nginx/conf/nginx.conf\nnobody      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5711")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5710")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":25 ?        00:00:00 nginx: worker process\nroot        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5713")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1407")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":25 pts/0    00:00:00 "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" --color"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("auto nginx\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);