(window.webpackJsonp=window.webpackJsonp||[]).push([[279],{1670:function(t,a,v){"use strict";v.r(a);var s=v(42),_=Object(s.a)({},(function(){var t=this,a=t.$createElement,v=t._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("p",[t._v("iSula容器引擎具有很多优点：轻、快等等。那么，如何呈现这些优点呢？这篇文章我们主要关注iSula容器引擎的“快”。为了证明“快”，那就需要有参照物进行对比。环视业内，我们发现几个能打的；容器引擎鼻祖Docker、红帽的Podman以及CRI-O。")]),t._v(" "),v("p",[t._v("目标确定了，我们开始明确对比范围了。")]),t._v(" "),v("h2",{attrs:{id:"测试范围"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#测试范围"}},[t._v("#")]),t._v(" 测试范围")]),t._v(" "),v("p",[t._v("容器引擎的使用模式主要是：")]),t._v(" "),v("ul",[v("li",[t._v("客户端使用模式：多见于个人开发、测试以及部分生产场景；")]),t._v(" "),v("li",[t._v("PAAS通过CRI接口使用模式：云计算的经典场景，通过CRI接口调用容器引擎能力，管理pod集群；")])]),t._v(" "),v("p",[t._v("为了尽量覆盖应用场景，因此我们需要覆盖上述两种场景，对客户端模式和CRI模式分别进行测试对比。")]),t._v(" "),v("h3",{attrs:{id:"客户端模式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#客户端模式"}},[t._v("#")]),t._v(" 客户端模式")]),t._v(" "),v("p",[t._v("由于CRI-O不具备客户端功能，所以我们选择的测试对象是：")]),t._v(" "),v("ul",[v("li",[t._v("Docker")]),t._v(" "),v("li",[t._v("Podman")]),t._v(" "),v("li",[t._v("iSula")])]),t._v(" "),v("h3",{attrs:{id:"cri模式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cri模式"}},[t._v("#")]),t._v(" CRI模式")]),t._v(" "),v("p",[t._v("CRI接口，需要通过"),v("code",[t._v("cri-tools")]),t._v("工具进行测试。")]),t._v(" "),v("p",[t._v("为了对比的观赏性，我们在CRI模式下也选择三个测试对象：")]),t._v(" "),v("ul",[v("li",[t._v("Docker")]),t._v(" "),v("li",[t._v("CRI-O")]),t._v(" "),v("li",[t._v("iSula")])]),t._v(" "),v("h2",{attrs:{id:"环境准备"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[t._v("#")]),t._v(" 环境准备")]),t._v(" "),v("h3",{attrs:{id:"机器环境"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#机器环境"}},[t._v("#")]),t._v(" 机器环境")]),t._v(" "),v("h4",{attrs:{id:"x86"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#x86"}},[t._v("#")]),t._v(" X86")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("配置项")]),t._v(" "),v("th",[t._v("配置信息")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("OS")]),t._v(" "),v("td",[t._v("Fedora32 X86_64")])]),t._v(" "),v("tr",[v("td",[t._v("内核")]),t._v(" "),v("td",[t._v("linux 5.7.10-201.fc32.x86_64")])]),t._v(" "),v("tr",[v("td",[t._v("CPU")]),t._v(" "),v("td",[t._v("48核，Intel Xeon CPU E5-2695 v2 @ 2.4GHZ")])]),t._v(" "),v("tr",[v("td",[t._v("内存")]),t._v(" "),v("td",[t._v("132 GB")])])])]),t._v(" "),v("h4",{attrs:{id:"arm"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#arm"}},[t._v("#")]),t._v(" ARM")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("配置项")]),t._v(" "),v("th",[t._v("配置信息")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("OS")]),t._v(" "),v("td",[t._v("Euleros")])]),t._v(" "),v("tr",[v("td",[t._v("内核")]),t._v(" "),v("td",[t._v("linux 4.19.90")])]),t._v(" "),v("tr",[v("td",[t._v("CPU")]),t._v(" "),v("td",[t._v("64核")])]),t._v(" "),v("tr",[v("td",[t._v("内存")]),t._v(" "),v("td",[t._v("196 GB")])])])]),t._v(" "),v("h3",{attrs:{id:"安装isulad"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#安装isulad"}},[t._v("#")]),t._v(" 安装iSulad")]),t._v(" "),v("p",[t._v("参考"),v("a",{attrs:{href:"https://gitee.com/openeuler/iSulad/blob/master/docs/build_guide.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),v("OutboundLink")],1),t._v("安装即可。")]),t._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[t._v("$ isula version\n\nClient:\n  Version:\t"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),t._v(".3\n  Git commit:\t3bb24761f07cc0ac399e1cb783053db8b33b263d\n  Built:\t"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-08-01T09:40:06.568848951+08:00\n\nServer:\n  Version:\t"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),t._v(".3\n  Git commit:\t3bb24761f07cc0ac399e1cb783053db8b33b263d\n  Built:\t"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-08-01T09:40:06.568848951+08:00\n\nOCI config:\n  Version:\t"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(".1\n  Default file:\t/etc/default/isulad/config.json\n")])])]),v("h3",{attrs:{id:"安装cri-tools"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#安装cri-tools"}},[t._v("#")]),t._v(" 安装cri-tools")]),t._v(" "),v("p",[t._v("CRI测试，使用统一的客户端工具进行测试，选择K8S对应的"),v("code",[t._v("V1.15.0")]),t._v("版本即可。")]),t._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[t._v("$ "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/kubernetes-sigs/cri-tools\n$ "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" cri-tools\n$ "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout v1.15.0\n$ "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n$ "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[v("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$GOPATH")]),t._v("/bin\n")])])]),v("h3",{attrs:{id:"安装docker"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[t._v("#")]),t._v(" 安装docker")]),t._v(" "),v("p",[t._v("根据"),v("a",{attrs:{href:"https://docs.docker.com/engine/install/fedora/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),v("OutboundLink")],1),t._v("安装即可。")]),t._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[t._v("$ docker version\n\nClient:\n Version:           "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.03")]),t._v(".11\n API version:       "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.40")]),t._v("\n Go version:        go1.14.3\n Git commit:        42e35e6\n Built:             Sun Jun "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(":16:58 "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("\n OS/Arch:           linux/amd64\n Experimental:      "),v("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n\nServer: Docker Engine - Community\n Engine:\n  Version:          "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.03")]),t._v(".11\n  API version:      "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.40")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("minimum version "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.12")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  Go version:       go1.14.3\n  Git commit:       42e35e6\n  Built:            Sun Jun "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" 00:00:00 "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("\n  OS/Arch:          linux/amd64\n  Experimental:     "),v("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n containerd:\n  Version:          "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.3")]),t._v(".3\n  GitCommit:        \n runc:\n  Version:          "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(".0-rc10+dev\n  GitCommit:        fbdbaf85ecbc0e077f336c03062710435607dbf1\n docker-init:\n  Version:          "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.18")]),t._v(".0\n  GitCommit:\n")])])]),v("h3",{attrs:{id:"安装kubelet"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#安装kubelet"}},[t._v("#")]),t._v(" 安装kubelet")]),t._v(" "),v("p",[t._v("我们选择"),v("code",[t._v("V1.15.0")]),t._v("版本作为测试版本，下载源码"),v("code",[t._v("https://github.com/kubernetes/kubernetes.git")]),t._v("。")]),t._v(" "),v("h4",{attrs:{id:"准备源码"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#准备源码"}},[t._v("#")]),t._v(" 准备源码")]),t._v(" "),v("p",[t._v("如果下载失败或者太慢，可以配置代理：")]),t._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置国内代理")]),t._v("\ngo "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" -w "),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GOPROXY")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://goproxy.cn,direct\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置私有仓库地址")]),t._v("\ngo "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" -w "),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GOPRIVATE")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(".gitlab.com,.gitee.com\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置sum验证服务地址")]),t._v("\ngo "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" -w "),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GOSUMDB")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sum.golang.google.cn"')]),t._v("\n")])])]),v("p",[t._v("开始下载源码：")]),t._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[t._v("$ "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$GOPATH")]),t._v("/src/k8s.io\n$ "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/kubernetes/kubernetes.git\n$ "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" kubernetes\n$ "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout v1.15.0\n$ go mod tidy\n")])])]),v("h4",{attrs:{id:"编译"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#编译"}},[t._v("#")]),t._v(" 编译")]),t._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[t._v("$ "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" all "),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("WHAT")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("cmd/kubelet\n")])])]),v("p",[t._v("注意：")]),t._v(" "),v("ul",[v("li",[v("strong",[t._v("K8S的版本对go的版本有要求，例如"),v("code",[t._v("V1.15.0")]),t._v("需要go 1.12版本")])]),t._v(" "),v("li",[t._v("可以使用"),v("code",[t._v("go mod tidy")]),t._v("，测试依赖代码下载，如果存在鉴权失败的仓库，可以使用"),v("code",[t._v("go get -v -insecure")]),t._v("下载")])]),t._v(" "),v("h4",{attrs:{id:"安装"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[t._v("$ "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" _output/bin/kubelet /usr/local/bin/kubelet\n$ kubelet --version\n  Kubernetes v1.15.0\n")])])]),v("h4",{attrs:{id:"启动kubelet"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#启动kubelet"}},[t._v("#")]),t._v(" 启动kubelet")]),t._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[t._v("$ kubelet --network-plugin"),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("cni --runtime-cgroups"),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/systemd/system.slice --kubelet-cgroups"),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/systemd/system.slice --cgroup-driver"),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"systemd"')]),t._v("  --fail-swap-on"),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false  -v "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" --enable-controller-attach-detach"),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false --experimental-dockershim\n")])])]),v("p",[t._v("注：cgroup由systemd管理")]),t._v(" "),v("h3",{attrs:{id:"安装cri-o"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#安装cri-o"}},[t._v("#")]),t._v(" 安装CRI-O")]),t._v(" "),v("p",[t._v("由于直接通过"),v("code",[t._v("dnf")]),t._v("安装"),v("code",[t._v("CRI-O")]),t._v("的"),v("code",[t._v("v1.15.4")]),t._v("版本有问题，所以需要源码编译安装。")]),t._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[t._v("$ dnf "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" glib-2.0 glibc-devel glibc-static container-common\n$ "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/cri-o/cri-o.git\n$ "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" crio\n$ "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n$ "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n$ "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /etc/crio "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" crio.conf /etc/crio/\n")])])]),v("h3",{attrs:{id:"安装podman"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#安装podman"}},[t._v("#")]),t._v(" 安装podman")]),t._v(" "),v("p",[t._v("直接使用"),v("code",[t._v("dnf")]),t._v("的源安装即可：")]),t._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[t._v("$ dnf "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y podman\n\n$ podman --version\n  podman version "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),t._v(".3\n")])])]),v("h2",{attrs:{id:"测试方案"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#测试方案"}},[t._v("#")]),t._v(" 测试方案")]),t._v(" "),v("p",[t._v("本文档主要关注容器引擎的容器生命周期的性能，所以测试方案如下：")]),t._v(" "),v("ul",[v("li",[t._v("单容器的create、start、stop、rm和run等操作的性能；")]),t._v(" "),v("li",[t._v("100个容器并发create、start、stop、rm和run等操作的性能；")]),t._v(" "),v("li",[t._v("单pod的runp、stopp和rmp等操作的性能；")]),t._v(" "),v("li",[t._v("单pod包含单容器的run、stop和rm等操作的性能；")]),t._v(" "),v("li",[t._v("100个pod并发runp、stopp和rmp等操作的性能；")]),t._v(" "),v("li",[t._v("100个包含单容器的pod并发run、stop和rm等操作的性能；")])]),t._v(" "),v("p",[t._v("注：pod的配置，必须指定linux，不然docker会给pod创建一个默认的网卡，导致cni插件执行失败。")]),t._v(" "),v("div",{staticClass:"language-json extra-class"},[v("pre",{pre:!0,attrs:{class:"language-json"}},[v("code",[v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"metadata"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nginx-sandbox"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"namespace"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"attempt"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uid"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hdishd83djaidwnduwk28bcsb"')]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// linux字段必须存在")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"linux"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),v("h3",{attrs:{id:"方案详细设计"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#方案详细设计"}},[t._v("#")]),t._v(" 方案详细设计")]),t._v(" "),v("p",[t._v("单次测试和并发测试虽然是两种测试场景，但是单次可以看成并发的特例。因此，设计测试用例的时候，通过控制并发数量来实现两种场景的区分。具体设计如下图：")]),t._v(" "),v("div",{staticClass:"language-mermaid extra-class"},[v("pre",{pre:!0,attrs:{class:"language-mermaid"}},[v("code",[v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" TD\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("classDef")]),t._v(" notestyle "),v("span",{pre:!0,attrs:{class:"token style"}},[v("span",{pre:!0,attrs:{class:"token property"}},[t._v("fill")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("#98A092"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),v("span",{pre:!0,attrs:{class:"token property"}},[t._v("stroke")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("#f66"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),v("span",{pre:!0,attrs:{class:"token property"}},[t._v("stroke-width")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("2px"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),v("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("#fff"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),v("span",{pre:!0,attrs:{class:"token property"}},[t._v("stroke-dasharray")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 5"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 5")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("classDef")]),t._v(" parallelstyle "),v("span",{pre:!0,attrs:{class:"token style"}},[v("span",{pre:!0,attrs:{class:"token property"}},[t._v("fill")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("#C969A3"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),v("span",{pre:!0,attrs:{class:"token property"}},[t._v("stroke")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("#666"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),v("span",{pre:!0,attrs:{class:"token property"}},[t._v("stroke-width")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("1px"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),v("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("#ffa"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),v("span",{pre:!0,attrs:{class:"token property"}},[t._v("stroke-dasharray")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 5"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 5")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" pretest"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tA"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[download images]")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" B"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[do clean]")]),t._v("\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" dotest\n\tC[foreach 1"),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("->")]),t._v("10]\n\tD"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("{{runtest}}")]),t._v("\n\tE"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(remove max and min cases)")]),t._v("\n\tX"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(calculate avg of residual case)")]),t._v("\n\tC "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" D\n\tD "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" E\n\tE "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" X\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\tB "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" C\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" runtest\n\tR"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(begin test)")]),t._v("\n\tF"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v(">t1: get begin time point]")]),t._v("\n\tG"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(parallel run all cases)")]),t._v("\n\tH"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[wait all cases finish]")]),t._v("\n\tI"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v(">t2: get end time point]")]),t._v("\n\tR "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" F\n\tF "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" G\n\tF "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" H\n\tH "),v("span",{pre:!0,attrs:{class:"token inter-arrow-label"}},[v("span",{pre:!0,attrs:{class:"token arrow-head arrow operator"}},[t._v("-.")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token label property"}},[t._v("wait")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v(".->")])]),t._v(" G\n\tH "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" I\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\tR "),v("span",{pre:!0,attrs:{class:"token inter-arrow-label"}},[v("span",{pre:!0,attrs:{class:"token arrow-head arrow operator"}},[t._v("-.")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token label property"}},[t._v("implements")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v(".->")])]),t._v(" D\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" posttest\n\tZ"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[do clean]")]),t._v("\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\tX "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" Z\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" R notestyle"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" G parallelstyle"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),v("h3",{attrs:{id:"客户端模式-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#客户端模式-2"}},[t._v("#")]),t._v(" 客户端模式")]),t._v(" "),v("h4",{attrs:{id:"x86环境测试结果"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#x86环境测试结果"}},[t._v("#")]),t._v(" X86环境测试结果")]),t._v(" "),v("p",[t._v("单容器操作性能对比")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("Podman (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS Podman")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("create")]),t._v(" "),v("td",[t._v("287")]),t._v(" "),v("td",[t._v("180")]),t._v(" "),v("td",[t._v("131")]),t._v(" "),v("td",[t._v("-54.36%")]),t._v(" "),v("td",[t._v("-27.22%")])]),t._v(" "),v("tr",[v("td",[t._v("start")]),t._v(" "),v("td",[t._v("675")]),t._v(" "),v("td",[t._v("916")]),t._v(" "),v("td",[t._v("315")]),t._v(" "),v("td",[t._v("-53.33%")]),t._v(" "),v("td",[t._v("-65.61%")])]),t._v(" "),v("tr",[v("td",[t._v("stop")]),t._v(" "),v("td",[t._v("349")]),t._v(" "),v("td",[t._v("513")]),t._v(" "),v("td",[t._v("274")]),t._v(" "),v("td",[t._v("-21.49%")]),t._v(" "),v("td",[t._v("-46.59%")])]),t._v(" "),v("tr",[v("td",[t._v("rm")]),t._v(" "),v("td",[t._v("72")]),t._v(" "),v("td",[t._v("187")]),t._v(" "),v("td",[t._v("60")]),t._v(" "),v("td",[t._v("-16.67%")]),t._v(" "),v("td",[t._v("-67.91%")])]),t._v(" "),v("tr",[v("td",[t._v("run")]),t._v(" "),v("td",[t._v("866")]),t._v(" "),v("td",[t._v("454")]),t._v(" "),v("td",[t._v("359")]),t._v(" "),v("td",[t._v("-58.55%")]),t._v(" "),v("td",[t._v("-20.93%")])])])]),t._v(" "),v("p",[t._v("100容器并发操作性能对比")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("Podman (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS Podman")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("100 * create")]),t._v(" "),v("td",[t._v("4995")]),t._v(" "),v("td",[t._v("3993")]),t._v(" "),v("td",[t._v("1911")]),t._v(" "),v("td",[t._v("-61.74%")]),t._v(" "),v("td",[t._v("-52.14%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * start")]),t._v(" "),v("td",[t._v("10126")]),t._v(" "),v("td",[t._v("5537")]),t._v(" "),v("td",[t._v("3861")]),t._v(" "),v("td",[t._v("-61.87%")]),t._v(" "),v("td",[t._v("-30.27%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * stop")]),t._v(" "),v("td",[t._v("8066")]),t._v(" "),v("td",[t._v("11100")]),t._v(" "),v("td",[t._v("4268")]),t._v(" "),v("td",[t._v("-47.09%")]),t._v(" "),v("td",[t._v("-61.55%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * rm")]),t._v(" "),v("td",[t._v("3220")]),t._v(" "),v("td",[t._v("4319")]),t._v(" "),v("td",[t._v("1967")]),t._v(" "),v("td",[t._v("-38.91%")]),t._v(" "),v("td",[t._v("-54.46%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * run")]),t._v(" "),v("td",[t._v("9822")]),t._v(" "),v("td",[t._v("5979")]),t._v(" "),v("td",[t._v("4392")]),t._v(" "),v("td",[t._v("-55.28%")]),t._v(" "),v("td",[t._v("-26.54%")])])])]),t._v(" "),v("h4",{attrs:{id:"arm环境测试结果"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#arm环境测试结果"}},[t._v("#")]),t._v(" ARM环境测试结果")]),t._v(" "),v("p",[t._v("单容器操作性能对比")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("Podman (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS Podman")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("create")]),t._v(" "),v("td",[t._v("401")]),t._v(" "),v("td",[t._v("361")]),t._v(" "),v("td",[t._v("177")]),t._v(" "),v("td",[t._v("-55.86%")]),t._v(" "),v("td",[t._v("-50.97%")])]),t._v(" "),v("tr",[v("td",[t._v("start")]),t._v(" "),v("td",[t._v("1160")]),t._v(" "),v("td",[t._v("1143")]),t._v(" "),v("td",[t._v("523")]),t._v(" "),v("td",[t._v("-54.91%")]),t._v(" "),v("td",[t._v("-54.24%")])]),t._v(" "),v("tr",[v("td",[t._v("stop")]),t._v(" "),v("td",[t._v("634")]),t._v(" "),v("td",[t._v("576")]),t._v(" "),v("td",[t._v("395")]),t._v(" "),v("td",[t._v("-37.70%")]),t._v(" "),v("td",[t._v("-31.42%")])]),t._v(" "),v("tr",[v("td",[t._v("rm")]),t._v(" "),v("td",[t._v("105")]),t._v(" "),v("td",[t._v("398")]),t._v(" "),v("td",[t._v("89")]),t._v(" "),v("td",[t._v("-15.24%")]),t._v(" "),v("td",[t._v("-77.64%")])]),t._v(" "),v("tr",[v("td",[t._v("run")]),t._v(" "),v("td",[t._v("1261")]),t._v(" "),v("td",[t._v("1071")]),t._v(" "),v("td",[t._v("634")]),t._v(" "),v("td",[t._v("-49.72%")]),t._v(" "),v("td",[t._v("-40.80%")])])])]),t._v(" "),v("p",[t._v("100容器并发操作性能对比")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("Podman (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS Podman")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("100 * create")]),t._v(" "),v("td",[t._v("14563")]),t._v(" "),v("td",[t._v("12081")]),t._v(" "),v("td",[t._v("4172")]),t._v(" "),v("td",[t._v("-71.35%")]),t._v(" "),v("td",[t._v("-65.47%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * start")]),t._v(" "),v("td",[t._v("23420")]),t._v(" "),v("td",[t._v("15370")]),t._v(" "),v("td",[t._v("5294")]),t._v(" "),v("td",[t._v("-77.40%")]),t._v(" "),v("td",[t._v("-65.56%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * stop")]),t._v(" "),v("td",[t._v("22234")]),t._v(" "),v("td",[t._v("16973")]),t._v(" "),v("td",[t._v("8619")]),t._v(" "),v("td",[t._v("-61.24%")]),t._v(" "),v("td",[t._v("-49.22%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * rm")]),t._v(" "),v("td",[t._v("937")]),t._v(" "),v("td",[t._v("10943")]),t._v(" "),v("td",[t._v("926")]),t._v(" "),v("td",[t._v("-1.17%")]),t._v(" "),v("td",[t._v("-92.33%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * run")]),t._v(" "),v("td",[t._v("28091")]),t._v(" "),v("td",[t._v("16280")]),t._v(" "),v("td",[t._v("9015")]),t._v(" "),v("td",[t._v("-67.91%")]),t._v(" "),v("td",[t._v("-44.63%")])])])]),t._v(" "),v("h3",{attrs:{id:"cri模式-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cri模式-2"}},[t._v("#")]),t._v(" CRI模式")]),t._v(" "),v("h4",{attrs:{id:"x86环境测试结果-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#x86环境测试结果-2"}},[t._v("#")]),t._v(" X86环境测试结果")]),t._v(" "),v("p",[t._v("单pod操作")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("CRIO (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS CRIO")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("runp")]),t._v(" "),v("td",[t._v("681")]),t._v(" "),v("td",[t._v("321")]),t._v(" "),v("td",[t._v("239")]),t._v(" "),v("td",[t._v("-64.90%")]),t._v(" "),v("td",[t._v("-25.55%")])]),t._v(" "),v("tr",[v("td",[t._v("stopp")]),t._v(" "),v("td",[t._v("400")]),t._v(" "),v("td",[t._v("356")]),t._v(" "),v("td",[t._v("272")]),t._v(" "),v("td",[t._v("-32.00%")]),t._v(" "),v("td",[t._v("-23.60%")])])])]),t._v(" "),v("p",[t._v("单pod单容器操作")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("CRIO (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS CRIO")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("run")]),t._v(" "),v("td",[t._v("1249")]),t._v(" "),v("td",[t._v("525")]),t._v(" "),v("td",[t._v("382")]),t._v(" "),v("td",[t._v("-69.42%")]),t._v(" "),v("td",[t._v("-27.24%")])]),t._v(" "),v("tr",[v("td",[t._v("stop")]),t._v(" "),v("td",[t._v("554")]),t._v(" "),v("td",[t._v("759")]),t._v(" "),v("td",[t._v("564")]),t._v(" "),v("td",[t._v("+1.81%")]),t._v(" "),v("td",[t._v("-25.69%")])])])]),t._v(" "),v("p",[t._v("100并发pod操作")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("CRIO (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS CRIO")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("100 * runp")]),t._v(" "),v("td",[t._v("13998")]),t._v(" "),v("td",[t._v("4946")]),t._v(" "),v("td",[t._v("3887")]),t._v(" "),v("td",[t._v("-72.23%")]),t._v(" "),v("td",[t._v("-21.41%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * stopp")]),t._v(" "),v("td",[t._v("8402")]),t._v(" "),v("td",[t._v("4834")]),t._v(" "),v("td",[t._v("4631")]),t._v(" "),v("td",[t._v("-44.88%")]),t._v(" "),v("td",[t._v("-4.20%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * rmp")]),t._v(" "),v("td",[t._v("2076")]),t._v(" "),v("td",[t._v("1388")]),t._v(" "),v("td",[t._v("1073")]),t._v(" "),v("td",[t._v("-48.31%")]),t._v(" "),v("td",[t._v("-22.69%")])])])]),t._v(" "),v("p",[t._v("100并发pod容器操作")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("CRIO (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS CRIO")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("100 * run")]),t._v(" "),v("td",[t._v("28158")]),t._v(" "),v("td",[t._v("9077")]),t._v(" "),v("td",[t._v("5630")]),t._v(" "),v("td",[t._v("-80.01%")]),t._v(" "),v("td",[t._v("-37.98%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * stop")]),t._v(" "),v("td",[t._v("9395")]),t._v(" "),v("td",[t._v("8443")]),t._v(" "),v("td",[t._v("8196")]),t._v(" "),v("td",[t._v("-12.76%")]),t._v(" "),v("td",[t._v("-2.93%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * rm")]),t._v(" "),v("td",[t._v("4415")]),t._v(" "),v("td",[t._v("3739")]),t._v(" "),v("td",[t._v("1524")]),t._v(" "),v("td",[t._v("-65.48%")]),t._v(" "),v("td",[t._v("-59.24%")])])])]),t._v(" "),v("h4",{attrs:{id:"arm环境测试结果-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#arm环境测试结果-2"}},[t._v("#")]),t._v(" ARM环境测试结果")]),t._v(" "),v("p",[t._v("单pod操作")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("CRIO (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS CRIO")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("runp")]),t._v(" "),v("td",[t._v("1339")]),t._v(" "),v("td",[t._v("2366")]),t._v(" "),v("td",[t._v("536")]),t._v(" "),v("td",[t._v("-59.97%")]),t._v(" "),v("td",[t._v("-77.35%")])]),t._v(" "),v("tr",[v("td",[t._v("stopp")]),t._v(" "),v("td",[t._v("443")]),t._v(" "),v("td",[t._v("419")]),t._v(" "),v("td",[t._v("255")]),t._v(" "),v("td",[t._v("-42.44%")]),t._v(" "),v("td",[t._v("-39.14%")])])])]),t._v(" "),v("p",[t._v("单pod单容器操作")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("CRIO (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS CRIO")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("run")]),t._v(" "),v("td",[t._v("2069")]),t._v(" "),v("td",[t._v("3039")]),t._v(" "),v("td",[t._v("338")]),t._v(" "),v("td",[t._v("-83.66%")]),t._v(" "),v("td",[t._v("-88.88%")])]),t._v(" "),v("tr",[v("td",[t._v("stop")]),t._v(" "),v("td",[t._v("684")]),t._v(" "),v("td",[t._v("688")]),t._v(" "),v("td",[t._v("214")]),t._v(" "),v("td",[t._v("-68.71%")]),t._v(" "),v("td",[t._v("-68.90%")])])])]),t._v(" "),v("p",[t._v("100并发pod操作")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("CRIO (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS CRIO")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("100 * runp")]),t._v(" "),v("td",[t._v("27802")]),t._v(" "),v("td",[t._v("29197")]),t._v(" "),v("td",[t._v("9827")]),t._v(" "),v("td",[t._v("-64.65%")]),t._v(" "),v("td",[t._v("-66.34%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * stopp")]),t._v(" "),v("td",[t._v("14429")]),t._v(" "),v("td",[t._v("11173")]),t._v(" "),v("td",[t._v("6394")]),t._v(" "),v("td",[t._v("-55.69%")]),t._v(" "),v("td",[t._v("-42.77%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * rmp")]),t._v(" "),v("td",[t._v("771")]),t._v(" "),v("td",[t._v("9007")]),t._v(" "),v("td",[t._v("1790")]),t._v(" "),v("td",[t._v("+132.17%")]),t._v(" "),v("td",[t._v("-80.13%")])])])]),t._v(" "),v("p",[t._v("100并发pod容器操作")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("操作耗时 (ms)")]),t._v(" "),v("th",[t._v("Docker  (avg)")]),t._v(" "),v("th",[t._v("CRIO (avg)")]),t._v(" "),v("th",[t._v("iSula (avg)")]),t._v(" "),v("th",[t._v("VS Docker")]),t._v(" "),v("th",[t._v("VS CRIO")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("100 * run")]),t._v(" "),v("td",[t._v("54087")]),t._v(" "),v("td",[t._v("43521")]),t._v(" "),v("td",[t._v("5284")]),t._v(" "),v("td",[t._v("-90.23%")]),t._v(" "),v("td",[t._v("-87.86%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * stop")]),t._v(" "),v("td",[t._v("18317")]),t._v(" "),v("td",[t._v("19108")]),t._v(" "),v("td",[t._v("2641")]),t._v(" "),v("td",[t._v("-85.58%")]),t._v(" "),v("td",[t._v("-86.18%")])]),t._v(" "),v("tr",[v("td",[t._v("100 * rm")]),t._v(" "),v("td",[t._v("1592")]),t._v(" "),v("td",[t._v("18390")]),t._v(" "),v("td",[t._v("2162")]),t._v(" "),v("td",[t._v("+35.80%")]),t._v(" "),v("td",[t._v("-88.24%")])])])]),t._v(" "),v("h2",{attrs:{id:"总结分析"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#总结分析"}},[t._v("#")]),t._v(" 总结分析")]),t._v(" "),v("p",[t._v("从测试数据来看，在容器的生命周期的操作和并发操作上面，我们iSulad都是优于其他容器引擎的。尤其是在ARM上的表现尤为出色，并发性能已经接近于X86的性能了；而其他容器引擎在ARM上面的表现不尽如人意，甚至出现性能下降1倍以上。")]),t._v(" "),v("p",[t._v("那么，我们iSulad为什么有这么大的优势呢？我觉得，主要是从下面几个方面来看。")]),t._v(" "),v("ul",[v("li",[t._v("首先，iSulad是用C/C++语言写的，而Docker/Podman/CRI-O都是用golang写的；C/C++在速度方面本身就有优势；")]),t._v(" "),v("li",[t._v("架构设计上面，相对于Docker，iSulad架构更加简单，调用链更短；而Podman是serverless模式，并发更加不具备优势；")]),t._v(" "),v("li",[t._v("在容器创建流程中，减小锁粒度、消减容器的依赖（例如镜像管理模块），从而提高了并发的性能；")])]),t._v(" "),v("h3",{attrs:{id:"架构对比"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#架构对比"}},[t._v("#")]),t._v(" 架构对比")]),t._v(" "),v("p",[t._v("iSulad架构设计如下：")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://gitee.com/openeuler/iSulad/raw/master/docs/design/arch.jpg",alt:"arch"}})]),t._v(" "),v("p",[t._v("Docker官网给的架构图如下：")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://docs.docker.com/engine/images/engine-components-flow.png",alt:"Docker架构图"}})]),t._v(" "),v("p",[t._v("但是，docker daemon里面还涉及到containerd和runc的流程没有描述，大体结构如下：")]),t._v(" "),v("div",{staticClass:"language-mermaid extra-class"},[v("pre",{pre:!0,attrs:{class:"language-mermaid"}},[v("code",[v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" LR\n\tA"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(docker daemon)")]),t._v("\n\tB"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(containerd)")]),t._v("\n\tC"),v("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(runc)")]),t._v("\n\tA "),v("span",{pre:!0,attrs:{class:"token inter-arrow-label"}},[v("span",{pre:!0,attrs:{class:"token arrow-head arrow operator"}},[t._v("-.")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token label property"}},[t._v("grpc")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v(".->")])]),t._v(" B\n\tB "),v("span",{pre:!0,attrs:{class:"token inter-arrow-label"}},[v("span",{pre:!0,attrs:{class:"token arrow-head arrow operator"}},[t._v("-.")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token label property"}},[t._v("fork/exec")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v(".->")])]),t._v(" C\n")])])]),v("p",[t._v("从架构来看，docker的容器生命周期流程涉及：客户端到docker daemon的restful通信；daemon到containerd的GRPC通信；然后fork执行runc。而iSulad的流程：客户端到服务端的GRPC通信，然后fork执行lxc-start。")]),t._v(" "),v("h2",{attrs:{id:"参考文档"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[t._v("#")]),t._v(" 参考文档")]),t._v(" "),v("ul",[v("li",[t._v("https://stackoverflow.com/questions/46726216/kubelet-fails-to-get-cgroup-stats-for-docker-and-kubelet-services")]),t._v(" "),v("li",[t._v("https://developer.aliyun.com/article/630682")]),t._v(" "),v("li",[t._v("https://blog.csdn.net/bingshiwuyu/article/details/107333259")]),t._v(" "),v("li",[t._v("https://github.com/cri-o/cri-o")]),t._v(" "),v("li",[t._v("https://gitee.com/openeuler/iSulad/blob/master/docs/build_guide.md")])])])}),[],!1,null,null,null);a.default=_.exports}}]);