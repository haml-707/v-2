(window.webpackJsonp=window.webpackJsonp||[]).push([[297],{1716:function(t,s,a){"use strict";a.r(s);var e=a(42),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"squid-4-8-移植指南-openeuler-20-03-lts-sp1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#squid-4-8-移植指南-openeuler-20-03-lts-sp1"}},[t._v("#")]),t._v(" Squid 4.8 移植指南（openEuler 20.03 LTS SP1）")]),t._v(" "),a("h1",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),a("h4",{attrs:{id:"简要介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简要介绍"}},[t._v("#")]),t._v(" 简要介绍")]),t._v(" "),a("p",[t._v("Squid cache（简称为Squid）是一个流行的代理服务器和Web缓存服务器，是一个开源软件（GNU通用公共许可证）。Squid有广泛的用途，从作为网页服务器的前置cache服务器缓存相关请求来提高Web服务器的速度，到为一组人共享网络资源而缓存万维网，域名系统和其他网络搜索，到通过过滤流量帮助网络安全，到局域网通过代理上网。Squid主要设计用于在Unix一类系统运行。Squid的发展历史相当悠久，功能也相当完善。除了HTTP外，对于FTP与HTTPS的支持也相当好，在3.0测试版中也支持了IPv6。")]),t._v(" "),a("p",[t._v("开发语言：C++")]),t._v(" "),a("p",[t._v("一句话描述：Web 代理服务、Web缓存服务器")]),t._v(" "),a("h4",{attrs:{id:"建议的版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#建议的版本"}},[t._v("#")]),t._v(" 建议的版本")]),t._v(" "),a("p",[t._v("建议使用版本为“Squid 4.8”。")]),t._v(" "),a("blockquote",[a("p",[t._v("说明：\n本文档适用于Squid 4.8，其他版本的Squid移植步骤也可参考本文档。")])]),t._v(" "),a("h1",{attrs:{id:"环境要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境要求"}},[t._v("#")]),t._v(" 环境要求")]),t._v(" "),a("h4",{attrs:{id:"硬件要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#硬件要求"}},[t._v("#")]),t._v(" 硬件要求")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("项目")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("服务器")]),t._v(" "),a("td",[t._v("TaiShan 200服务器（型号2280）")])]),t._v(" "),a("tr",[a("td",[t._v("CPU")]),t._v(" "),a("td",[t._v("鲲鹏920 5250处理器")])]),t._v(" "),a("tr",[a("td",[t._v("内存")]),t._v(" "),a("td",[t._v("内存 >= 8G")])]),t._v(" "),a("tr",[a("td",[t._v("磁盘分区")]),t._v(" "),a("td",[t._v("对磁盘分区无要求")])])])]),t._v(" "),a("h4",{attrs:{id:"操作系统要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作系统要求"}},[t._v("#")]),t._v(" 操作系统要求")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("项目")]),t._v(" "),a("th",[t._v("版本")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("openEuler")]),t._v(" "),a("td",[t._v("openEuler 20.03 LTS SP1 aarch64")])]),t._v(" "),a("tr",[a("td",[t._v("Kernel")]),t._v(" "),a("td",[t._v("4.19.90-2003.4.0.0036.oe1.aarch64")])])])]),t._v(" "),a("h4",{attrs:{id:"安装操作系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装操作系统"}},[t._v("#")]),t._v(" 安装操作系统")]),t._v(" "),a("p",[t._v("请参考："),a("a",{attrs:{href:"https://openeuler.org/zh/docs/20.03_LTS_SP1/docs/Installation/installation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("20.03 LTS SP1 安装指南"),a("OutboundLink")],1)]),t._v(" "),a("h4",{attrs:{id:"检查当前系统版本信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查当前系统版本信息"}},[t._v("#")]),t._v(" 检查当前系统版本信息")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat /etc/os-release")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"openEuler"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VERSION")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20.03 (LTS-SP1)"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"openEuler"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VERSION_ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20.03"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PRETTY_NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"openEuler 20.03 (LTS-SP1)"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ANSI_COLOR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0;31"')]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("说明：\n如果是全新安装操作系统，安装方式建议不要使用最小化安装，否则很多软件包需要手动安装，可选择“Server with GUI”安装方式。")])]),t._v(" "),a("h1",{attrs:{id:"安装squid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装squid"}},[t._v("#")]),t._v(" 安装Squid")]),t._v(" "),a("h2",{attrs:{id:"配置dns解析文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置dns解析文件"}},[t._v("#")]),t._v(" 配置dns解析文件")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# echo "nameserver 114.114.114.114" >> /etc/resolv.conf')]),t._v("\n")])])]),a("h2",{attrs:{id:"安装依赖包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖包"}},[t._v("#")]),t._v(" 安装依赖包")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yum install gcc  libxml2-devel libcap-devel libtool-ltdl-devel perl* -y")]),t._v("\n")])])]),a("h2",{attrs:{id:"源码编译安装squid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码编译安装squid"}},[t._v("#")]),t._v(" 源码编译安装Squid")]),t._v(" "),a("h3",{attrs:{id:"获取squid-4-8的源码包。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取squid-4-8的源码包。"}},[t._v("#")]),t._v(" 获取Squid 4.8的源码包。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /home")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wget http://www.squid-cache.org/Versions/v4/squid-4.8.tar.gz")]),t._v("\n")])])]),a("h3",{attrs:{id:"安装squid-4-8。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装squid-4-8。"}},[t._v("#")]),t._v(" 安装Squid 4.8。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tar -xf squid-4.8.tar.gz")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd squid-4.8")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost squid-4.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./configure")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost squid-4.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# make -j 64 && make install")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost squid-4.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chmod 777 /usr/local/squid/var/logs/")]),t._v("\n")])])]),a("h1",{attrs:{id:"运行和验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行和验证"}},[t._v("#")]),t._v(" 运行和验证")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost squid-4.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /usr/local/squid/sbin/squid")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost squid-4.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ps -ef |grep squid")]),t._v("\nroot       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("79023")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":40 ?        00:00:00 /usr/local/squid/sbin/squid\nnobody     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("79025")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("79023")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":40 ?        00:00:00 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("squid-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" --kid squid-1\nnobody     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("79026")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("79025")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":40 ?        00:00:00 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("logfile-daemon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" /usr/local/squid/var/logs/access.log\nroot       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("79028")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1405")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":40 pts/0    00:00:00 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" --color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("auto squid\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);